<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† ØªØ±Ø¬Ù…Ù‡ Ø´Ù†Ø§ÙˆØ± Ø¨Ø±Ø§ÛŒ ØªØ±Ø¬Ù…Ù‡ Ø³Ø±ÛŒØ¹ Ù…ØªÙ†">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ØªØ±Ø¬Ù…Ù‡ Ø´Ù†Ø§ÙˆØ±">
    <title>Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† ØªØ±Ø¬Ù…Ù‡ Ø´Ù†Ø§ÙˆØ±</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="128x128" href="icons/icon-128x128.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="384x384" href="icons/icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="icons/icon-512x512.png">
    
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/themes.css">
</head>
<body>
    <!-- Ø¯Ú©Ù…Ù‡ Ø´Ù†Ø§ÙˆØ± Ø§ØµÙ„ÛŒ -->
    <button id="floatingBtn" class="floating-btn" aria-label="Open translation">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" fill="currentColor"/>
        </svg>
    </button>

    <!-- Ù¾Ù†Ù„ ØªØ±Ø¬Ù…Ù‡ -->
    <div id="translationPanel" class="translation-panel hidden">
        <!-- Ù‡Ø¯Ø± Ù¾Ù†Ù„ -->
        <div class="panel-header">
            <div class="header-icons">
                <button id="swapBtn" class="icon-btn swap-btn" aria-label="Swap languages">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z" fill="currentColor"/>
                    </svg>
                </button>
                <button id="closeBtn" class="icon-btn close-btn" aria-label="Close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Ú©Ø§Ø¯Ø± ÙˆØ±ÙˆØ¯ÛŒ Ù…ØªÙ† -->
        <div class="translation-box input-box">
            <div class="language-flag" id="sourceFlag">
                <span class="flag-emoji">ðŸ‡®ðŸ‡·</span>
            </div>
            <div class="text-container">
                <textarea 
                    id="sourceText" 
                    class="translation-textarea" 
                    placeholder="Paste or type your text here..."
                    rows="4"
                ></textarea>
                <div class="language-info">
                    <span id="sourceLanguage" class="language-name">Persian</span>
                    <button id="selectSourceLangBtn" class="select-lang-btn" aria-label="Select source language">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7 10l5 5 5-5z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Ø¢ÛŒÚ©ÙˆÙ† ØªØ±Ø¬Ù…Ù‡ Ø¯Ø± ÙˆØ³Ø· (Ù‚Ø§Ø¨Ù„ Ú©Ù„ÛŒÚ©) -->
        <div class="translation-icon-container">
            <button id="translateIconBtn" class="translation-icon-btn" aria-label="Translate">
                <div class="translation-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" fill="currentColor"/>
                    </svg>
                </div>
            </button>
        </div>

        <!-- Ú©Ø§Ø¯Ø± Ø®Ø±ÙˆØ¬ÛŒ ØªØ±Ø¬Ù…Ù‡ -->
        <div class="translation-box output-box">
            <div class="language-flag" id="targetFlag">
                <span class="flag-emoji">ðŸ‡¬ðŸ‡§</span>
            </div>
            <div class="text-container">
                <div id="targetText" class="translation-output">
                    <span class="placeholder-text">Translation will appear here...</span>
                </div>
                <div class="language-info">
                    <span id="targetLanguage" class="language-name">English</span>
                    <div class="action-buttons-group">
                        <button id="selectTargetLangBtn" class="select-lang-btn" aria-label="Select target language">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7 10l5 5 5-5z" fill="currentColor"/>
                            </svg>
                        </button>
                        <button id="copyBtn" class="copy-btn" aria-label="Copy">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª -->
        <div id="statusMessage" class="status-message hidden"></div>
        
        <!-- Ù…Ù†ÙˆÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø²Ø¨Ø§Ù† -->
        <div id="languageSelector" class="language-selector"></div>
    </div>

    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ -->
    <script src="scripts/config.js"></script>
    <script src="scripts/language-detection.js"></script>
    <script src="scripts/translation.js"></script>
    <script src="scripts/ui.js"></script>
    <script src="scripts/app.js"></script>
    
    <!-- Ø«Ø¨Øª Service Worker Ø¨Ø±Ø§ÛŒ PWA -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // ØªØ´Ø®ÛŒØµ Ù…Ø³ÛŒØ± Ø¨Ø±Ø§ÛŒ GitHub Pages ÛŒØ§ localhost
                const swPath = window.location.pathname.includes('/Float_Translation_Button/') 
                    ? '/Float_Translation_Button/sw.js' 
                    : '/sw.js';
                
                navigator.serviceWorker.register(swPath)
                    .then((registration) => {
                        console.log('Service Worker registered:', registration);
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù†ØµØ¨ PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            // Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ÛŒÚ© Ø¯Ú©Ù…Ù‡ Ù†ØµØ¨ Ù†Ù…Ø§ÛŒØ´ Ø¯Ù‡ÛŒØ¯
            console.log('Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø¢Ù…Ø§Ø¯Ù‡ Ù†ØµØ¨ Ø§Ø³Øª!');
        });
    </script>
</body>
</html>

